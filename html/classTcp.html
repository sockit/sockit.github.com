<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SockIt: Tcp Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SockIt</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<h1>Tcp Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Tcp" -->
<p><code>#include &lt;<a class="el" href="Tcp_8h_source.html">Tcp.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Tcp:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classTcp.png" usemap="#Tcp_map" alt=""/>
  <map id="Tcp_map" name="Tcp_map">
<area href="classTcpClient.html" alt="TcpClient" shape="rect" coords="0,56,72,80"/>
<area href="classTcpServer.html" alt="TcpServer" shape="rect" coords="82,56,154,80"/>
</map>
 </div></div>

<p><a href="classTcp-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#af081afa2fd34edc12ac0dda43851352c">Tcp</a> (string <a class="el" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>, int <a class="el" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, boost::asio::io_service &amp;<a class="el" href="classTcp.html#ad0c319a0974aa3f07e9c5ae290ea18b4">io_service</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#ab5d2bbefce3133529f51b2afa2796b90">~Tcp</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#aea9e4a82b08f1893900dad21a1fedfb7">set_tcp_keepalive</a> (boost::shared_ptr&lt; tcp::socket &gt; socket)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#af93fb7459faba8da96f1df55728dfeee">bool_option_to_string</a> (optional&lt; bool &gt; &amp;arg, string iftrue, string iffalse)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">string&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classTcp.html#a6324523a33b5830641fd22e32bab8066">option_to_string</a> (optional&lt; T &gt; &amp;arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a5eae377b9c7c4e49a210a0372bdb9f73">parse_string_bool_arg</a> (map&lt; string, string &gt; &amp;options, string arg, optional&lt; bool &gt; &amp;arg_value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a91de22f151e40c56638ae54899f1be5a">parse_string_int_arg</a> (map&lt; string, string &gt; &amp;options, string arg, optional&lt; int &gt; &amp;arg_value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a65753a8c2d9bad07216abdcd5a8a1e86">parse_args</a> (map&lt; string, string &gt; options)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a59aee046563f221c89ab4b56146fcdc7">log_options</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a48b0192669ab99dc953ab3feae5c1b1c">close</a> ()=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a447cf3ccc28a073a6b871dd1f597c28d">send_handler</a> (const boost::system::error_code &amp;error_code, std::size_t bytes_transferred, string data, string <a class="el" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>, int <a class="el" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, boost::shared_ptr&lt; tcp::socket &gt; connection)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a96707e496b0fcef660c3f22fb6efc0fd">receive_handler</a> (const boost::system::error_code &amp;error_code, std::size_t bytes_transferred, boost::shared_ptr&lt; tcp::socket &gt; connection, string <a class="el" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>, int <a class="el" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a9798750750bc775de9a16d0f148bc002">fire_error_event</a> (const string &amp;message)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a69d92d55403e877f252bbfbfd7c02ec2">fire_disconnect_event</a> (const string &amp;message)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a7e5cfd764f04ca5e2729924b9d537db2">fire_data_event</a> (const string data, boost::shared_ptr&lt; tcp::socket &gt; connection)=0</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boost::array&lt; char, <a class="el" href="classTcp.html#a9302fa700d80ca1aed86e41e02925051">BUFFER_SIZE</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#aeb630e95d24f26852437098df5896b16">receive_buffer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boost::asio::io_service &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#ad0c319a0974aa3f07e9c5ae290ea18b4">io_service</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a96b0558a6ce522708bfd06cf1e6e45ba">waiting_to_shutdown</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">optional&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a395b2458742a84d78c1107ac8b59a7a8">using_ipv6</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">optional&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a00a788b6d5b91b31b340f942617b9dda">no_delay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">optional&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a6bff7fed84126b745930da36030c68c7">do_not_route</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">optional&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a5cec5af76ec94551f8dc5f98639e9953">keep_alive</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">optional&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a08e171f501f01c117f5a3c04d394d137">keep_alive_timeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a4811b96fe77f74f10b14aac532036708">active_jobs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#adcd27ee2753e2c0c43f58efa882a3ab5">active_jobs_mutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::set<br class="typebreak"/>
&lt; boost::system::error_code &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a9dbc59f5343aa045be1a888356ef6fbf">failed</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a9302fa700d80ca1aed86e41e02925051">BUFFER_SIZE</a> = 4096</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#a169a3d26315c2b5eecc02354ef44b777">MAX_DATA_SIZE</a> = 65536</td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTcp.html#ac01935b5a2bc7cc5ef28348f3d64ffa2">TcpEvent</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Interface to abstract out the client-server model for use in the <code><a class="el" href="classEvent.html">Event</a></code>. Contains common handlers used by both TCP servers and clients.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classEvent.html">Event</a> </dd></dl>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00060">60</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af081afa2fd34edc12ac0dda43851352c"></a><!-- doxytag: member="Tcp::Tcp" ref="af081afa2fd34edc12ac0dda43851352c" args="(string host, int port, boost::asio::io_service &amp;io_service)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tcp::Tcp </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::asio::io_service &amp;&#160;</td>
          <td class="paramname"><em>io_service</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Builds a generic TCP object, and registers the 'shutdown' method on the API.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">host</td><td>The hostname for this TCP object. For clients, this represents the remote host's hostname, and for servers, defaults to 'localhost'. </td></tr>
    <tr><td class="paramname">port</td><td>The port for this TCP object, which for clients, represents the port of the remote host to which to connect, and for servers, represents the port to which to bind and listen for incoming connections. </td></tr>
    <tr><td class="paramname">io_service</td><td>The I/O service used for asynchronous I/O requests </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00010">10</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>References <a class="el" href="Tcp_8h_source.html#l00276">disconnect_errors</a>.</p>
<div class="fragment"><pre class="fragment">                                                               :
    <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>(<a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>), <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>(<a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>), <a class="code" href="classTcp.html#a96b0558a6ce522708bfd06cf1e6e45ba">waiting_to_shutdown</a>(<span class="keyword">false</span>), <a class="code" href="classTcp.html#a4811b96fe77f74f10b14aac532036708">active_jobs</a>(0), <a class="code" href="classTcp.html#ad0c319a0974aa3f07e9c5ae290ea18b4">io_service</a>(ioService), <a class="code" href="classTcp.html#a395b2458742a84d78c1107ac8b59a7a8">using_ipv6</a>(<span class="keyword">false</span>), <a class="code" href="classTcp.html#a9dbc59f5343aa045be1a888356ef6fbf">failed</a>(<span class="keyword">false</span>)
{
    <span class="comment">// Collect the set of errors classified as &#39;disconnect&#39; type errors</span>
    <a class="code" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a>.insert(boost::asio::error::connection_reset);
    <a class="code" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a>.insert(boost::asio::error::eof);
    <a class="code" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a>.insert(boost::asio::error::connection_aborted);
    <a class="code" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a>.insert(boost::asio::error::operation_aborted);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab5d2bbefce3133529f51b2afa2796b90"></a><!-- doxytag: member="Tcp::~Tcp" ref="ab5d2bbefce3133529f51b2afa2796b90" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual Tcp::~Tcp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Immediately calls the <code>close</code> function, freeing all resources for this TCP object and shutting down any open connections. </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00080">80</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af93fb7459faba8da96f1df55728dfeee"></a><!-- doxytag: member="Tcp::bool_option_to_string" ref="af93fb7459faba8da96f1df55728dfeee" args="(optional&lt; bool &gt; &amp;arg, string iftrue, string iffalse)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string Tcp::bool_option_to_string </td>
          <td>(</td>
          <td class="paramtype">optional&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>iftrue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>iffalse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper for logging options passed in.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>optional bool option </td></tr>
    <tr><td class="paramname">iftrue</td><td>if the arg has been set to true, return this </td></tr>
    <tr><td class="paramname">iffalse</td><td>if the arg hasn't been set, or is set to false, return this </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00159">159</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>Referenced by <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (arg &amp;&amp; *arg)
        <span class="keywordflow">return</span> iftrue;
    <span class="keywordflow">return</span> iffalse;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48b0192669ab99dc953ab3feae5c1b1c"></a><!-- doxytag: member="Tcp::close" ref="a48b0192669ab99dc953ab3feae5c1b1c" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Tcp::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Closes down this TCP object immediately, by immediately ceasing to accept incoming connections, shutdown all necessary resources. </p>

<p>Implemented in <a class="el" href="classTcpClient.html#a1ee082bbca3927811bbe2c0aa75386c4">TcpClient</a>, and <a class="el" href="classTcpServer.html#a6e94bd28e3d3d506609df98afb94c879">TcpServer</a>.</p>

<p>Referenced by <a class="el" href="Tcp_8cpp_source.html#l00020">send_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e5cfd764f04ca5e2729924b9d537db2"></a><!-- doxytag: member="Tcp::fire_data_event" ref="a7e5cfd764f04ca5e2729924b9d537db2" args="(const string data, boost::shared_ptr&lt; tcp::socket &gt; connection)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Tcp::fire_data_event </td>
          <td>(</td>
          <td class="paramtype">const string&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; tcp::socket &gt;&#160;</td>
          <td class="paramname"><em>connection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper to fire data event to javascript.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The data received </td></tr>
    <tr><td class="paramname">connection</td><td>The connection on which attempted to receive data. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classTcpClient.html#a8085a788062b837c12040533a18aa933">TcpClient</a>, and <a class="el" href="classTcpServer.html#a49708224d7eb73b2371b53d672b626e5">TcpServer</a>.</p>

<p>Referenced by <a class="el" href="Tcp_8cpp_source.html#l00088">receive_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a69d92d55403e877f252bbfbfd7c02ec2"></a><!-- doxytag: member="Tcp::fire_disconnect_event" ref="a69d92d55403e877f252bbfbfd7c02ec2" args="(const string &amp;message)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Tcp::fire_disconnect_event </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper to fire an disconnect error event to javascript.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The error message </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classTcpClient.html#a279302da46c29b24b539b4e7ddf20b94">TcpClient</a>, and <a class="el" href="classTcpServer.html#aef3b4f4665d3fab448008201915f1fd5">TcpServer</a>.</p>

<p>Referenced by <a class="el" href="Tcp_8cpp_source.html#l00088">receive_handler()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00020">send_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a9798750750bc775de9a16d0f148bc002"></a><!-- doxytag: member="Tcp::fire_error_event" ref="a9798750750bc775de9a16d0f148bc002" args="(const string &amp;message)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Tcp::fire_error_event </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper to fire an error event to javascript.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The error message </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classTcpClient.html#a03a3ef57b2df46a21e21640362457871">TcpClient</a>, and <a class="el" href="classTcpServer.html#a07ef4a083656e07099f615d34d3627a1">TcpServer</a>.</p>

<p>Referenced by <a class="el" href="Tcp_8cpp_source.html#l00088">receive_handler()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00020">send_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a59aee046563f221c89ab4b56146fcdc7"></a><!-- doxytag: member="Tcp::log_options" ref="a59aee046563f221c89ab4b56146fcdc7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tcp::log_options </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write to the log the options used to create this connection. </p>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00229">229</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>References <a class="el" href="Tcp_8cpp_source.html#l00159">bool_option_to_string()</a>, <a class="el" href="Tcp_8h_source.html#l00239">do_not_route</a>, <a class="el" href="Tcp_8h_source.html#l00264">host</a>, <a class="el" href="Logger_8h_source.html#l00084">Logger::info()</a>, <a class="el" href="Tcp_8h_source.html#l00244">keep_alive</a>, <a class="el" href="Tcp_8h_source.html#l00249">keep_alive_timeout</a>, <a class="el" href="Tcp_8h_source.html#l00234">no_delay</a>, <a class="el" href="Tcp_8h_source.html#l00269">port</a>, and <a class="el" href="Tcp_8h_source.html#l00229">using_ipv6</a>.</p>

<p>Referenced by <a class="el" href="TcpClient_8cpp_source.html#l00044">TcpClient::init()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00197">parse_args()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">string</span> options(<span class="stringliteral">&quot;These arguments were passed in: &quot;</span>);

    options.append(<a class="code" href="classTcp.html#af93fb7459faba8da96f1df55728dfeee">bool_option_to_string</a>(<a class="code" href="classTcp.html#a395b2458742a84d78c1107ac8b59a7a8">using_ipv6</a>, <span class="stringliteral">&quot;ipv6, &quot;</span>, <span class="stringliteral">&quot;ipv4, &quot;</span>));
    options.append(<a class="code" href="classTcp.html#af93fb7459faba8da96f1df55728dfeee">bool_option_to_string</a>(<a class="code" href="classTcp.html#a6bff7fed84126b745930da36030c68c7">do_not_route</a>, <span class="stringliteral">&quot;no routing, &quot;</span>, <span class="stringliteral">&quot;use routing, &quot;</span>));
    options.append(<a class="code" href="classTcp.html#af93fb7459faba8da96f1df55728dfeee">bool_option_to_string</a>(<a class="code" href="classTcp.html#a00a788b6d5b91b31b340f942617b9dda">no_delay</a>, <span class="stringliteral">&quot;no delay, &quot;</span>, <span class="stringliteral">&quot;allow delay, &quot;</span>));
    options.append(<a class="code" href="classTcp.html#af93fb7459faba8da96f1df55728dfeee">bool_option_to_string</a>(<a class="code" href="classTcp.html#a5cec5af76ec94551f8dc5f98639e9953">keep_alive</a>, <span class="stringliteral">&quot;keep alive&quot;</span>, <span class="stringliteral">&quot;don&#39;t keep alive&quot;</span>));
    options.append(<span class="stringliteral">&quot;, keep alive timeout is &quot;</span>);
    options.append(option_to_string&lt;int&gt; (<a class="code" href="classTcp.html#a08e171f501f01c117f5a3c04d394d137">keep_alive_timeout</a>));

    <a class="code" href="classLogger.html#a8c7d9b42b9a5480dceed15a21a2d57c6">Logger::info</a>(options, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6324523a33b5830641fd22e32bab8066"></a><!-- doxytag: member="Tcp::option_to_string" ref="a6324523a33b5830641fd22e32bab8066" args="(optional&lt; T &gt; &amp;arg)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">string Tcp::option_to_string </td>
          <td>(</td>
          <td class="paramtype">optional&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper for logging options passed in.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>the optional argument </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00167">167</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (arg)
        <span class="keywordflow">return</span> boost::lexical_cast&lt;<span class="keywordtype">string</span>&gt;(*arg);
    <span class="keywordflow">return</span> string(<span class="stringliteral">&quot;unset&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a65753a8c2d9bad07216abdcd5a8a1e86"></a><!-- doxytag: member="Tcp::parse_args" ref="a65753a8c2d9bad07216abdcd5a8a1e86" args="(map&lt; string, string &gt; options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tcp::parse_args </td>
          <td>(</td>
          <td class="paramtype">map&lt; string, string &gt;&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Parses any options (like whether or use IPv6 or IPv4) from the options. Supported options currently include:</p>
<p>ipv6 if true, use ipv6. otherwise use ipv4. keep alive allow the socket to send keep-alives. do not route option to force TCP to use local interfaces only, prevents routing no delay option to disable Nagle algorithm for possibly improved performance</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>A map of options to values. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00197">197</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>References <a class="el" href="Tcp_8h_source.html#l00239">do_not_route</a>, <a class="el" href="Tcp_8h_source.html#l00244">keep_alive</a>, <a class="el" href="Tcp_8h_source.html#l00249">keep_alive_timeout</a>, <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>, <a class="el" href="Tcp_8h_source.html#l00234">no_delay</a>, <a class="el" href="Tcp_8cpp_source.html#l00174">parse_string_bool_arg()</a>, <a class="el" href="Tcp_8cpp_source.html#l00187">parse_string_int_arg()</a>, and <a class="el" href="Tcp_8h_source.html#l00229">using_ipv6</a>.</p>

<p>Referenced by <a class="el" href="TcpClient_8cpp_source.html#l00026">TcpClient::TcpClient()</a>, and <a class="el" href="TcpServer_8cpp_source.html#l00016">TcpServer::TcpServer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    map&lt;string, string&gt;::iterator it;
    map&lt;string, string&gt; transformed_options;

    <span class="keywordtype">string</span> t(<span class="stringliteral">&quot;true&quot;</span>);
    <span class="keywordtype">string</span> f(<span class="stringliteral">&quot;false&quot;</span>);

    <span class="comment">// transform the entire map to lower case</span>
    <span class="keywordflow">for</span> (it = options.begin(); it != options.end(); it++)
    {
        <span class="keywordtype">string</span> k = it-&gt;first;
        <span class="keywordtype">string</span> v = it-&gt;second;

        std::transform(k.begin(), k.end(), k.begin(), ::tolower);
        std::transform(v.begin(), v.end(), v.begin(), ::tolower);

        k.erase(std::remove_if(k.begin(), k.end(), ::isspace), k.end());
        v.erase(std::remove_if(v.begin(), v.end(), ::isspace), v.end());

        transformed_options.insert(std::pair&lt;string, string&gt;(k, v));
    }

    <a class="code" href="classTcp.html#a5eae377b9c7c4e49a210a0372bdb9f73">parse_string_bool_arg</a>(transformed_options, <span class="stringliteral">&quot;ipv6&quot;</span>, <a class="code" href="classTcp.html#a395b2458742a84d78c1107ac8b59a7a8">using_ipv6</a>);
    <a class="code" href="classTcp.html#a5eae377b9c7c4e49a210a0372bdb9f73">parse_string_bool_arg</a>(transformed_options, <span class="stringliteral">&quot;donotroute&quot;</span>, <a class="code" href="classTcp.html#a6bff7fed84126b745930da36030c68c7">do_not_route</a>);
    <a class="code" href="classTcp.html#a5eae377b9c7c4e49a210a0372bdb9f73">parse_string_bool_arg</a>(transformed_options, <span class="stringliteral">&quot;keepalive&quot;</span>, <a class="code" href="classTcp.html#a5cec5af76ec94551f8dc5f98639e9953">keep_alive</a>);
    <a class="code" href="classTcp.html#a5eae377b9c7c4e49a210a0372bdb9f73">parse_string_bool_arg</a>(transformed_options, <span class="stringliteral">&quot;nodelay&quot;</span>, <a class="code" href="classTcp.html#a00a788b6d5b91b31b340f942617b9dda">no_delay</a>);
    <a class="code" href="classTcp.html#a91de22f151e40c56638ae54899f1be5a">parse_string_int_arg</a>(transformed_options, <span class="stringliteral">&quot;keepalivetimeout&quot;</span>, <a class="code" href="classTcp.html#a08e171f501f01c117f5a3c04d394d137">keep_alive_timeout</a>);

    <a class="code" href="classTcp.html#a59aee046563f221c89ab4b56146fcdc7">log_options</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5eae377b9c7c4e49a210a0372bdb9f73"></a><!-- doxytag: member="Tcp::parse_string_bool_arg" ref="a5eae377b9c7c4e49a210a0372bdb9f73" args="(map&lt; string, string &gt; &amp;options, string arg, optional&lt; bool &gt; &amp;arg_value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tcp::parse_string_bool_arg </td>
          <td>(</td>
          <td class="paramtype">map&lt; string, string &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">optional&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>arg_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper for parsing boolean arguments</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>A map of strings to string representing the options passed in and their values </td></tr>
    <tr><td class="paramname">arg</td><td>The specific option to check for </td></tr>
    <tr><td class="paramname">arg_value</td><td>This will hold the value of the argument, if found. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00174">174</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>Referenced by <a class="el" href="Tcp_8cpp_source.html#l00197">parse_args()</a>.</p>
<div class="fragment"><pre class="fragment">{
    map&lt;string, string&gt;::iterator it;

    <span class="keywordflow">if</span> ((it = options.find(arg)) != options.end())
    {
        <span class="keywordflow">if</span> (it-&gt;second == std::string(<span class="stringliteral">&quot;true&quot;</span>))
            arg_value.reset(<span class="keyword">true</span>);
        <span class="keywordflow">if</span> (it-&gt;second == std::string(<span class="stringliteral">&quot;false&quot;</span>))
            arg_value.reset(<span class="keyword">false</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a91de22f151e40c56638ae54899f1be5a"></a><!-- doxytag: member="Tcp::parse_string_int_arg" ref="a91de22f151e40c56638ae54899f1be5a" args="(map&lt; string, string &gt; &amp;options, string arg, optional&lt; int &gt; &amp;arg_value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tcp::parse_string_int_arg </td>
          <td>(</td>
          <td class="paramtype">map&lt; string, string &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">optional&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>arg_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper for parsing integer arguments</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>A map of strings to string representing the options passed in and their values </td></tr>
    <tr><td class="paramname">arg</td><td>The specific option to check for </td></tr>
    <tr><td class="paramname">arg_value</td><td>This will hold the value of the argument, if found. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00187">187</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>Referenced by <a class="el" href="Tcp_8cpp_source.html#l00197">parse_args()</a>.</p>
<div class="fragment"><pre class="fragment">{
    map&lt;string, string&gt;::iterator it;

    <span class="keywordflow">if</span> ((it = options.find(arg)) != options.end())
    {
        arg_value.reset(boost::lexical_cast&lt;int&gt;(it-&gt;second));
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a96707e496b0fcef660c3f22fb6efc0fd"></a><!-- doxytag: member="Tcp::receive_handler" ref="a96707e496b0fcef660c3f22fb6efc0fd" args="(const boost::system::error_code &amp;error_code, std::size_t bytes_transferred, boost::shared_ptr&lt; tcp::socket &gt; connection, string host, int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tcp::receive_handler </td>
          <td>(</td>
          <td class="paramtype">const boost::system::error_code &amp;&#160;</td>
          <td class="paramname"><em>error_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bytes_transferred</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; tcp::socket &gt;&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handler invoked when some data has been received.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">error_code</td><td>The error code encountered when trying to receive data, if any occurred. On success, this value is zero, and nonzero on error. </td></tr>
    <tr><td class="paramname">bytes_transferred</td><td>The number of bytes successfully received over the connection. </td></tr>
    <tr><td class="paramname">connection</td><td>The connection on which attempted to receive data. </td></tr>
    <tr><td class="paramname">host</td><td>The hostname for this TCP object </td></tr>
    <tr><td class="paramname">port</td><td>The port for this TCP object </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classTcpServer.html#a99739644296c7c2647022695d0d0bdbe">TcpServer</a>.</p>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00088">88</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>References <a class="el" href="Tcp_8h_source.html#l00276">disconnect_errors</a>, <a class="el" href="Logger_8h_source.html#l00071">Logger::error()</a>, <a class="el" href="classTcp.html#a7e5cfd764f04ca5e2729924b9d537db2">fire_data_event()</a>, <a class="el" href="classTcp.html#a69d92d55403e877f252bbfbfd7c02ec2">fire_disconnect_event()</a>, <a class="el" href="classTcp.html#a9798750750bc775de9a16d0f148bc002">fire_error_event()</a>, <a class="el" href="Logger_8h_source.html#l00084">Logger::info()</a>, <a class="el" href="Tcp_8h_source.html#l00214">receive_buffer</a>, and <a class="el" href="Logger_8h_source.html#l00097">Logger::warn()</a>.</p>

<p>Referenced by <a class="el" href="TcpClient_8cpp_source.html#l00278">TcpClient::connect_handler()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Check for errors</span>
    <span class="keywordflow">if</span> (error_code)
    {
        <span class="comment">// Check for disconnection errors</span>
        <span class="keywordflow">if</span> (<a class="code" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a>.find(error_code) != <a class="code" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a>.end())
        {
            <span class="keywordflow">if</span> (error_code == boost::asio::error::operation_aborted)
            {
                <a class="code" href="classLogger.html#a8c7d9b42b9a5480dceed15a21a2d57c6">Logger::info</a>(<span class="stringliteral">&quot;TCP send failed, aborted&quot;</span>, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
                <span class="keywordflow">return</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordtype">string</span> message(<span class="stringliteral">&quot;TCP receive failed, disconnected, error message: &#39;&quot;</span> + error_code.message() + <span class="stringliteral">&quot;&#39;&quot;</span>);
                <a class="code" href="classLogger.html#a8c7d9b42b9a5480dceed15a21a2d57c6">Logger::info</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
                <a class="code" href="classTcp.html#a69d92d55403e877f252bbfbfd7c02ec2">fire_disconnect_event</a>(message);
                <span class="keywordflow">return</span>;
            }
        }

        <span class="comment">// Otherwise, this is a more serious error, fail and log the error</span>
        <span class="keywordtype">string</span> message(
                <span class="stringliteral">&quot;TCP receive failed, error message: &#39;&quot;</span> + error_code.message() + <span class="stringliteral">&quot;&#39;, value &#39;&quot;</span> + boost::lexical_cast&lt;<span class="keywordtype">string</span>&gt;(
                        error_code.value()) + <span class="stringliteral">&quot;&#39;&quot;</span>);
        <a class="code" href="classLogger.html#adb709be72ac3e448f2af97b9cafaef2f">Logger::error</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
        <a class="code" href="classTcp.html#a9798750750bc775de9a16d0f148bc002">fire_error_event</a>(message);

        <span class="comment">// Shutdown the socket we&#39;re receiving from</span>
        <span class="keywordflow">if</span> (connection.get() &amp;&amp; connection-&gt;is_open())
        {
            <span class="keywordflow">try</span>
            {
                connection-&gt;shutdown(connection-&gt;shutdown_receive);
            }
            <span class="keywordflow">catch</span> (...)
            {
                <a class="code" href="classLogger.html#ae0ebb73647360cb425de15cb9790563d">Logger::warn</a>(<span class="stringliteral">&quot;TCP receive failed, shutdown improperly, proceeding anyway&quot;</span>, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
            }
        }

        <span class="keywordflow">return</span>;
    }

    <span class="comment">// Pull out the data we received, and fire a data received event</span>
    <span class="keywordtype">string</span> data = string(<a class="code" href="classTcp.html#aeb630e95d24f26852437098df5896b16">receive_buffer</a>.c_array(), bytes_transferred);

    <span class="comment">// Log success</span>
    <span class="keywordtype">string</span> message(
            <span class="stringliteral">&quot;Successfully received all &quot;</span> + boost::lexical_cast&lt;string&gt;(bytes_transferred) + <span class="stringliteral">&quot; bytes of &quot;</span> + boost::lexical_cast&lt;string&gt;(
                    bytes_transferred) + <span class="stringliteral">&quot; total bytes. Data: &#39;&quot;</span> + data + <span class="stringliteral">&quot;&#39;&quot;</span>);

    <a class="code" href="classLogger.html#a8c7d9b42b9a5480dceed15a21a2d57c6">Logger::info</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);

    <span class="keywordflow">try</span>
    {
        <a class="code" href="classTcp.html#a7e5cfd764f04ca5e2729924b9d537db2">fire_data_event</a>(data, connection);
    }
    <span class="keywordflow">catch</span> (<span class="keyword">const</span> boost::bad_weak_ptr &amp;p)
    {
        <a class="code" href="classLogger.html#adb709be72ac3e448f2af97b9cafaef2f">Logger::error</a>(<span class="stringliteral">&quot;Event is going out of scope&quot;</span>, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
    }

    <span class="comment">// Try to receive more data</span>
    <span class="keywordflow">if</span> (connection.get())
        connection-&gt;async_receive(boost::asio::buffer(<a class="code" href="classTcp.html#aeb630e95d24f26852437098df5896b16">receive_buffer</a>),
                boost::bind(&amp;<a class="code" href="classTcp.html#a96707e496b0fcef660c3f22fb6efc0fd">Tcp::receive_handler</a>, <span class="keyword">this</span>, _1, _2, connection, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a447cf3ccc28a073a6b871dd1f597c28d"></a><!-- doxytag: member="Tcp::send_handler" ref="a447cf3ccc28a073a6b871dd1f597c28d" args="(const boost::system::error_code &amp;error_code, std::size_t bytes_transferred, string data, string host, int port, boost::shared_ptr&lt; tcp::socket &gt; connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tcp::send_handler </td>
          <td>(</td>
          <td class="paramtype">const boost::system::error_code &amp;&#160;</td>
          <td class="paramname"><em>error_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bytes_transferred</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; tcp::socket &gt;&#160;</td>
          <td class="paramname"><em>connection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handler invoked when the data has been sent (or sending terminated in error).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">error_code</td><td>The error code encountered when trying to send data, if any occurred. On success, this value is zero, and nonzero on error. </td></tr>
    <tr><td class="paramname">bytes_transferred</td><td>The number of bytes successfully sent over the connection. </td></tr>
    <tr><td class="paramname">data</td><td>The data to be sent. </td></tr>
    <tr><td class="paramname">host</td><td>The hostname for this TCP object </td></tr>
    <tr><td class="paramname">port</td><td>The port for this TCP object </td></tr>
    <tr><td class="paramname">connection</td><td>The connection this data was sent on </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00020">20</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>References <a class="el" href="Tcp_8h_source.html#l00254">active_jobs</a>, <a class="el" href="Tcp_8h_source.html#l00259">active_jobs_mutex</a>, <a class="el" href="classTcp.html#a48b0192669ab99dc953ab3feae5c1b1c">close()</a>, <a class="el" href="Tcp_8h_source.html#l00276">disconnect_errors</a>, <a class="el" href="Logger_8h_source.html#l00071">Logger::error()</a>, <a class="el" href="classTcp.html#a69d92d55403e877f252bbfbfd7c02ec2">fire_disconnect_event()</a>, <a class="el" href="classTcp.html#a9798750750bc775de9a16d0f148bc002">fire_error_event()</a>, <a class="el" href="Logger_8h_source.html#l00084">Logger::info()</a>, <a class="el" href="Tcp_8h_source.html#l00224">waiting_to_shutdown</a>, and <a class="el" href="Logger_8h_source.html#l00097">Logger::warn()</a>.</p>

<p>Referenced by <a class="el" href="TcpClient_8cpp_source.html#l00338">TcpClient::flush()</a>, <a class="el" href="TcpEvent_8cpp_source.html#l00050">TcpEvent::send()</a>, and <a class="el" href="TcpClient_8cpp_source.html#l00177">TcpClient::send()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Check the error code</span>
    <span class="keywordflow">if</span> (error_code)
    {
        <span class="comment">// Check for disconnection errors</span>
        std::set&lt;boost::system::error_code&gt;::iterator find_result = <a class="code" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a>.find(error_code);
        <span class="keywordflow">if</span> (find_result != <a class="code" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">disconnect_errors</a>.end())
        {
            <span class="keywordflow">if</span> (error_code == boost::asio::error::operation_aborted)
            {
                <a class="code" href="classLogger.html#a8c7d9b42b9a5480dceed15a21a2d57c6">Logger::info</a>(<span class="stringliteral">&quot;TCP send failed, aborted&quot;</span>, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordtype">string</span> message(<span class="stringliteral">&quot;TCP send failed, disconnected, error message: &#39;&quot;</span> + error_code.message() + <span class="stringliteral">&quot;&#39;&quot;</span>);
                <a class="code" href="classLogger.html#a8c7d9b42b9a5480dceed15a21a2d57c6">Logger::info</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
                <a class="code" href="classTcp.html#a69d92d55403e877f252bbfbfd7c02ec2">fire_disconnect_event</a>(message);
            }
            <span class="keywordflow">return</span>;
        }

        <span class="keywordtype">string</span> message(
                <span class="stringliteral">&quot;TCP send failed, error message &#39;&quot;</span> + error_code.message() + <span class="stringliteral">&quot;&#39;, error code &#39;&quot;</span> + boost::lexical_cast&lt;<span class="keywordtype">string</span>&gt;(
                        error_code.value()) + <span class="stringliteral">&quot;&#39; was encountered&quot;</span>);
        <a class="code" href="classLogger.html#adb709be72ac3e448f2af97b9cafaef2f">Logger::error</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
        <a class="code" href="classTcp.html#a9798750750bc775de9a16d0f148bc002">fire_error_event</a>(message);
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (bytes_transferred != data.size())
    {
        <span class="comment">// Get the rest of the message, and try resending it</span>
        <span class="keywordtype">string</span> rest_of_buffer(((<span class="keywordtype">char</span>*) data.data()) + bytes_transferred, data.size() - bytes_transferred);

        <a class="code" href="classTcp.html#adcd27ee2753e2c0c43f58efa882a3ab5">active_jobs_mutex</a>.lock();
        <a class="code" href="classTcp.html#a4811b96fe77f74f10b14aac532036708">active_jobs</a>++;
        <a class="code" href="classTcp.html#adcd27ee2753e2c0c43f58efa882a3ab5">active_jobs_mutex</a>.unlock();

        connection-&gt;async_send(boost::asio::buffer(rest_of_buffer.data(), rest_of_buffer.size()),
                boost::bind(&amp;<a class="code" href="classTcp.html#a447cf3ccc28a073a6b871dd1f597c28d">Tcp::send_handler</a>, <span class="keyword">this</span>, _1, _2, rest_of_buffer, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, connection));

        <span class="comment">// Log that we had to do this</span>
        <span class="comment">// We could not send all of the message, fire an error and log it</span>
        <span class="keywordtype">string</span> message(
                <span class="keywordtype">string</span>(<span class="stringliteral">&quot;TCP send failed, only &quot;</span>) + boost::lexical_cast&lt;string&gt;(bytes_transferred) + <span class="stringliteral">&quot; of &quot;</span> + boost::lexical_cast&lt;string&gt;(
                        data.size()) + <span class="stringliteral">&quot; total bytes were sent&quot;</span>);
        <a class="code" href="classLogger.html#ae0ebb73647360cb425de15cb9790563d">Logger::warn</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordtype">string</span> message(<span class="stringliteral">&quot;TCP send succeeded, sent &quot;</span> + boost::lexical_cast&lt;string&gt;(bytes_transferred) + <span class="stringliteral">&quot; bytes, data is: &quot;</span> + data);
        <a class="code" href="classLogger.html#a8c7d9b42b9a5480dceed15a21a2d57c6">Logger::info</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
    }

    <span class="comment">// Check to see if this is for the last send to complete, and if we&#39;re waiting to shutdown</span>
    <a class="code" href="classTcp.html#adcd27ee2753e2c0c43f58efa882a3ab5">active_jobs_mutex</a>.lock();
    <a class="code" href="classTcp.html#a4811b96fe77f74f10b14aac532036708">active_jobs</a>--;
    <a class="code" href="classTcp.html#adcd27ee2753e2c0c43f58efa882a3ab5">active_jobs_mutex</a>.unlock();
    <span class="keywordtype">int</span> current_jobs = <a class="code" href="classTcp.html#a4811b96fe77f74f10b14aac532036708">active_jobs</a>;
    <span class="keywordflow">if</span> (<a class="code" href="classTcp.html#a96b0558a6ce522708bfd06cf1e6e45ba">waiting_to_shutdown</a> &amp;&amp; current_jobs == 0)
    {
        <a class="code" href="classTcp.html#a48b0192669ab99dc953ab3feae5c1b1c">close</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aea9e4a82b08f1893900dad21a1fedfb7"></a><!-- doxytag: member="Tcp::set_tcp_keepalive" ref="aea9e4a82b08f1893900dad21a1fedfb7" args="(boost::shared_ptr&lt; tcp::socket &gt; socket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Tcp::set_tcp_keepalive </td>
          <td>(</td>
          <td class="paramtype">boost::shared_ptr&lt; tcp::socket &gt;&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Helper for setting tcp keep alive options (varies from platform to platform).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The boost socket to set the tcp keep alive options on </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if successful, otherwise false. </dd></dl>

<p>Definition at line <a class="el" href="Tcp_8cpp_source.html#l00243">243</a> of file <a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a>.</p>

<p>References <a class="el" href="Logger_8h_source.html#l00071">Logger::error()</a>, <a class="el" href="Tcp_8h_source.html#l00264">host</a>, <a class="el" href="Tcp_8h_source.html#l00249">keep_alive_timeout</a>, and <a class="el" href="Tcp_8h_source.html#l00269">port</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00105">TcpServer::init_socket()</a>, and <a class="el" href="TcpClient_8cpp_source.html#l00089">TcpClient::init_socket()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef __UNIX__</span>
<span class="preprocessor"></span>
    <span class="comment">// For *n*x systems</span>
    <span class="keywordtype">int</span> native_fd = socket-&gt;native();
    <span class="keywordtype">int</span> timeout = *<a class="code" href="classTcp.html#a08e171f501f01c117f5a3c04d394d137">keep_alive_timeout</a>;
    <span class="keywordtype">int</span> intvl = 1;
    <span class="keywordtype">int</span> probes = 10;
    <span class="keywordtype">int</span> on = 1;

    <span class="keywordtype">int</span> ret_keepalive = setsockopt(native_fd, SOL_SOCKET, SO_KEEPALIVE, (<span class="keywordtype">void</span>*) &amp;on, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
    <span class="keywordtype">int</span> ret_keepidle = setsockopt(native_fd, SOL_TCP, TCP_KEEPIDLE, (<span class="keywordtype">void</span>*) &amp;timeout, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
    <span class="keywordtype">int</span> ret_keepintvl = setsockopt(native_fd, SOL_TCP, TCP_KEEPINTVL, (<span class="keywordtype">void</span>*) &amp;intvl, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
    <span class="keywordtype">int</span> ret_keepinit = setsockopt(native_fd, SOL_TCP, TCP_KEEPCNT, (<span class="keywordtype">void</span>*) &amp;probes, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));

    <span class="keywordflow">if</span>(ret_keepalive || ret_keepidle || ret_keepintvl || ret_keepinit)
    {
        <span class="keywordtype">string</span> message(<span class="stringliteral">&quot;Failed to enable keep alive on TCP client socket!&quot;</span>);
        <a class="code" href="classLogger.html#adb709be72ac3e448f2af97b9cafaef2f">Logger::error</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

<span class="preprocessor">#elif defined(__OSX__)</span>
<span class="preprocessor"></span>
    <span class="keywordtype">int</span> native_fd = socket-&gt;native();
    <span class="keywordtype">int</span> timeout = *<a class="code" href="classTcp.html#a08e171f501f01c117f5a3c04d394d137">keep_alive_timeout</a>;
    <span class="keywordtype">int</span> intvl = 1;
    <span class="keywordtype">int</span> on = 1;

    <span class="comment">// Set the timeout before the first keep alive message</span>
    <span class="keywordtype">int</span> ret_sokeepalive = setsockopt(native_fd, SOL_SOCKET, SO_KEEPALIVE, (<span class="keywordtype">void</span>*) &amp;on, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
    <span class="keywordtype">int</span> ret_tcpkeepalive = setsockopt(native_fd, IPPROTO_TCP, TCP_KEEPALIVE, (<span class="keywordtype">void</span>*) &amp;timeout, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
    <span class="keywordtype">int</span> ret_tcpkeepintvl = setsockopt(native_fd, IPPROTO_TCP, TCP_CONNECTIONTIMEOUT, (<span class="keywordtype">void</span>*) &amp;intvl, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));

    <span class="keywordflow">if</span>(ret_sokeepalive || ret_tcpkeepalive || ret_tcpkeepintvl)
    {
        <span class="keywordtype">string</span> message(<span class="stringliteral">&quot;Failed to enable keep alive on TCP client socket!&quot;</span>);
        <a class="code" href="classLogger.html#adb709be72ac3e448f2af97b9cafaef2f">Logger::error</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="comment">// Partially supported on windows</span>
    <span class="keyword">struct </span>tcp_keepalive keepalive_options;
    keepalive_options.onoff = 1;
    keepalive_options.keepalivetime = *<a class="code" href="classTcp.html#a08e171f501f01c117f5a3c04d394d137">keep_alive_timeout</a> * 1000;
    keepalive_options.keepaliveinterval = 2000;

    BOOL keepalive_val = <span class="keyword">true</span>;
    SOCKET native = socket-&gt;native();
    DWORD bytes_returned;

    <span class="keywordtype">int</span> ret_keepalive = setsockopt(native, SOL_SOCKET, SO_KEEPALIVE, (<span class="keyword">const</span> <span class="keywordtype">char</span> *) &amp;keepalive_val, <span class="keyword">sizeof</span>(keepalive_val));
    <span class="keywordtype">int</span> ret_iotcl = WSAIoctl(native, SIO_KEEPALIVE_VALS, (LPVOID) &amp; keepalive_options, (DWORD) <span class="keyword">sizeof</span>(keepalive_options), NULL, 0,
            (LPDWORD) &amp; bytes_returned, NULL, NULL);

    <span class="keywordflow">if</span> (ret_keepalive || ret_iotcl)
    {
        <span class="keywordtype">string</span> message(<span class="stringliteral">&quot;Failed to set keep alive timeout on TCP client socket!&quot;</span>);
        <a class="code" href="classLogger.html#adb709be72ac3e448f2af97b9cafaef2f">Logger::error</a>(message, <a class="code" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">port</a>, <a class="code" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">host</a>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="ac01935b5a2bc7cc5ef28348f3d64ffa2"></a><!-- doxytag: member="Tcp::TcpEvent" ref="ac01935b5a2bc7cc5ef28348f3d64ffa2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classTcpEvent.html">TcpEvent</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00082">82</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a4811b96fe77f74f10b14aac532036708"></a><!-- doxytag: member="Tcp::active_jobs" ref="a4811b96fe77f74f10b14aac532036708" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classTcp.html#a4811b96fe77f74f10b14aac532036708">Tcp::active_jobs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The current count of active jobs on the socket </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00254">254</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpEvent_8cpp_source.html#l00050">TcpEvent::send()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00177">TcpClient::send()</a>, <a class="el" href="Tcp_8cpp_source.html#l00020">send_handler()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00199">TcpServer::shutdown()</a>, and <a class="el" href="TcpClient_8cpp_source.html#l00144">TcpClient::shutdown()</a>.</p>

</div>
</div>
<a class="anchor" id="adcd27ee2753e2c0c43f58efa882a3ab5"></a><!-- doxytag: member="Tcp::active_jobs_mutex" ref="adcd27ee2753e2c0c43f58efa882a3ab5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex <a class="el" href="classTcp.html#adcd27ee2753e2c0c43f58efa882a3ab5">Tcp::active_jobs_mutex</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A mutex around the current count of active jobs on the socket </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00259">259</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpClient_8cpp_source.html#l00177">TcpClient::send()</a>, <a class="el" href="Tcp_8cpp_source.html#l00020">send_handler()</a>, and <a class="el" href="TcpClient_8cpp_source.html#l00144">TcpClient::shutdown()</a>.</p>

</div>
</div>
<a class="anchor" id="a9302fa700d80ca1aed86e41e02925051"></a><!-- doxytag: member="Tcp::BUFFER_SIZE" ref="a9302fa700d80ca1aed86e41e02925051" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classTcp.html#a9302fa700d80ca1aed86e41e02925051">Tcp::BUFFER_SIZE</a> = 4096<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A constant representing the size of the buffer in which to receive data. </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00203">203</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

</div>
</div>
<a class="anchor" id="adcbc3e86d98f8ba37247674cf67f77fd"></a><!-- doxytag: member="Tcp::disconnect_errors" ref="adcbc3e86d98f8ba37247674cf67f77fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;boost::system::error_code&gt; <a class="el" href="classTcp.html#adcbc3e86d98f8ba37247674cf67f77fd">Tcp::disconnect_errors</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The set of <code>boost::system::error_code</code> errors considered to be 'disconnection' errors.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>boost::system::error_code </dd></dl>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00276">276</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00218">TcpServer::accept_handler()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00278">TcpClient::connect_handler()</a>, <a class="el" href="Tcp_8cpp_source.html#l00088">receive_handler()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00215">TcpClient::resolve_handler()</a>, <a class="el" href="Tcp_8cpp_source.html#l00020">send_handler()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00010">Tcp()</a>.</p>

</div>
</div>
<a class="anchor" id="a6bff7fed84126b745930da36030c68c7"></a><!-- doxytag: member="Tcp::do_not_route" ref="a6bff7fed84126b745930da36030c68c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">optional&lt;bool&gt; <a class="el" href="classTcp.html#a6bff7fed84126b745930da36030c68c7">Tcp::do_not_route</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Option to force TCP to use local interfaces only, prevents routing </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00239">239</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00105">TcpServer::init_socket()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00089">TcpClient::init_socket()</a>, <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00197">parse_args()</a>.</p>

</div>
</div>
<a class="anchor" id="a9dbc59f5343aa045be1a888356ef6fbf"></a><!-- doxytag: member="Tcp::failed" ref="a9dbc59f5343aa045be1a888356ef6fbf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTcp.html#a9dbc59f5343aa045be1a888356ef6fbf">Tcp::failed</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A flag that is set to true whenever this TCP client or server encounters an unrecoverable error and cannot continue. </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00281">281</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00071">TcpServer::init()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00044">TcpClient::init()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00215">TcpClient::resolve_handler()</a>, <a class="el" href="TcpEvent_8cpp_source.html#l00050">TcpEvent::send()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00177">TcpClient::send()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00199">TcpServer::shutdown()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00144">TcpClient::shutdown()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00164">TcpServer::start_listening()</a>, and <a class="el" href="TcpClient_8cpp_source.html#l00010">TcpClient::TcpClient()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e981d15f94a460b91845bce9b930c61"></a><!-- doxytag: member="Tcp::host" ref="a0e981d15f94a460b91845bce9b930c61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="classTcp.html#a0e981d15f94a460b91845bce9b930c61">Tcp::host</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The hostname for this TCP object ('localhost' for servers, or the hostname of the remote host for clients) </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00264">264</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00028">TcpServer::close()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00119">TcpClient::close()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00278">TcpClient::connect_handler()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00338">TcpClient::flush()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00363">TcpClient::get_host()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00071">TcpServer::init()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00044">TcpClient::init()</a>, <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00215">TcpClient::resolve_handler()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00177">TcpClient::send()</a>, <a class="el" href="Tcp_8cpp_source.html#l00243">set_tcp_keepalive()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00199">TcpServer::shutdown()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00144">TcpClient::shutdown()</a>, and <a class="el" href="TcpServer_8cpp_source.html#l00164">TcpServer::start_listening()</a>.</p>

</div>
</div>
<a class="anchor" id="ad0c319a0974aa3f07e9c5ae290ea18b4"></a><!-- doxytag: member="Tcp::io_service" ref="ad0c319a0974aa3f07e9c5ae290ea18b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::asio::io_service&amp; <a class="el" href="classTcp.html#ad0c319a0974aa3f07e9c5ae290ea18b4">Tcp::io_service</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The I/O service for perform nonblocking actions </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00219">219</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00071">TcpServer::init()</a>, and <a class="el" href="TcpServer_8cpp_source.html#l00164">TcpServer::start_listening()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cec5af76ec94551f8dc5f98639e9953"></a><!-- doxytag: member="Tcp::keep_alive" ref="a5cec5af76ec94551f8dc5f98639e9953" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">optional&lt;bool&gt; <a class="el" href="classTcp.html#a5cec5af76ec94551f8dc5f98639e9953">Tcp::keep_alive</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allow the socket to send keep-alives </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00244">244</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00105">TcpServer::init_socket()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00089">TcpClient::init_socket()</a>, <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00197">parse_args()</a>.</p>

</div>
</div>
<a class="anchor" id="a08e171f501f01c117f5a3c04d394d137"></a><!-- doxytag: member="Tcp::keep_alive_timeout" ref="a08e171f501f01c117f5a3c04d394d137" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">optional&lt;int&gt; <a class="el" href="classTcp.html#a08e171f501f01c117f5a3c04d394d137">Tcp::keep_alive_timeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allow setting the socket's keep-alive timeout </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00249">249</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00105">TcpServer::init_socket()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00089">TcpClient::init_socket()</a>, <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>, <a class="el" href="Tcp_8cpp_source.html#l00197">parse_args()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00243">set_tcp_keepalive()</a>.</p>

</div>
</div>
<a class="anchor" id="a169a3d26315c2b5eecc02354ef44b777"></a><!-- doxytag: member="Tcp::MAX_DATA_SIZE" ref="a169a3d26315c2b5eecc02354ef44b777" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classTcp.html#a169a3d26315c2b5eecc02354ef44b777">Tcp::MAX_DATA_SIZE</a> = 65536<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A constant representing the maximum number of bytes that a TCP message can be in boost. If our message is larger than this, keep trying to send it until all successful bytes were sent. </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00209">209</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

</div>
</div>
<a class="anchor" id="a00a788b6d5b91b31b340f942617b9dda"></a><!-- doxytag: member="Tcp::no_delay" ref="a00a788b6d5b91b31b340f942617b9dda" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">optional&lt;bool&gt; <a class="el" href="classTcp.html#a00a788b6d5b91b31b340f942617b9dda">Tcp::no_delay</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Option to disable Nagle algorithm for possibly improved performance </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00234">234</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00105">TcpServer::init_socket()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00089">TcpClient::init_socket()</a>, <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00197">parse_args()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ed15f78afc9d0675404b4b41cc723ba"></a><!-- doxytag: member="Tcp::port" ref="a7ed15f78afc9d0675404b4b41cc723ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classTcp.html#a7ed15f78afc9d0675404b4b41cc723ba">Tcp::port</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The port (the port bound to by servers, port on which to connect to the remote host for clients) </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00269">269</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00028">TcpServer::close()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00119">TcpClient::close()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00278">TcpClient::connect_handler()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00338">TcpClient::flush()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00284">TcpServer::get_port()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00358">TcpClient::get_port()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00071">TcpServer::init()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00044">TcpClient::init()</a>, <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00215">TcpClient::resolve_handler()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00177">TcpClient::send()</a>, <a class="el" href="Tcp_8cpp_source.html#l00243">set_tcp_keepalive()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00199">TcpServer::shutdown()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00144">TcpClient::shutdown()</a>, and <a class="el" href="TcpServer_8cpp_source.html#l00164">TcpServer::start_listening()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb630e95d24f26852437098df5896b16"></a><!-- doxytag: member="Tcp::receive_buffer" ref="aeb630e95d24f26852437098df5896b16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::array&lt;char, <a class="el" href="classTcp.html#a9302fa700d80ca1aed86e41e02925051">BUFFER_SIZE</a>&gt; <a class="el" href="classTcp.html#aeb630e95d24f26852437098df5896b16">Tcp::receive_buffer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A buffer for receiving data from the remote host. </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00214">214</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00218">TcpServer::accept_handler()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00278">TcpClient::connect_handler()</a>, and <a class="el" href="Tcp_8cpp_source.html#l00088">receive_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a395b2458742a84d78c1107ac8b59a7a8"></a><!-- doxytag: member="Tcp::using_ipv6" ref="a395b2458742a84d78c1107ac8b59a7a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">optional&lt;bool&gt; <a class="el" href="classTcp.html#a395b2458742a84d78c1107ac8b59a7a8">Tcp::using_ipv6</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag to say whether or not this TCP object uses IPv6 </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00229">229</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00071">TcpServer::init()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00044">TcpClient::init()</a>, <a class="el" href="Tcp_8cpp_source.html#l00229">log_options()</a>, <a class="el" href="Tcp_8cpp_source.html#l00197">parse_args()</a>, and <a class="el" href="TcpClient_8cpp_source.html#l00215">TcpClient::resolve_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a96b0558a6ce522708bfd06cf1e6e45ba"></a><!-- doxytag: member="Tcp::waiting_to_shutdown" ref="a96b0558a6ce522708bfd06cf1e6e45ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTcp.html#a96b0558a6ce522708bfd06cf1e6e45ba">Tcp::waiting_to_shutdown</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A flag to say whether or not this server is waiting to shutdown </p>

<p>Definition at line <a class="el" href="Tcp_8h_source.html#l00224">224</a> of file <a class="el" href="Tcp_8h_source.html">Tcp.h</a>.</p>

<p>Referenced by <a class="el" href="TcpServer_8cpp_source.html#l00218">TcpServer::accept_handler()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00028">TcpServer::close()</a>, <a class="el" href="TcpClient_8cpp_source.html#l00119">TcpClient::close()</a>, <a class="el" href="Tcp_8cpp_source.html#l00020">send_handler()</a>, <a class="el" href="TcpServer_8cpp_source.html#l00199">TcpServer::shutdown()</a>, and <a class="el" href="TcpClient_8cpp_source.html#l00144">TcpClient::shutdown()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/jtedesco/dev/sockit/src/tcp/<a class="el" href="Tcp_8h_source.html">Tcp.h</a></li>
<li>/home/jtedesco/dev/sockit/src/tcp/<a class="el" href="Tcp_8cpp_source.html">Tcp.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Aug 1 2011 16:37:52 for SockIt by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
