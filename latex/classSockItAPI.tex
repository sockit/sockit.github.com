\hypertarget{classSockItAPI}{
\section{SockItAPI Class Reference}
\label{classSockItAPI}\index{SockItAPI@{SockItAPI}}
}


{\ttfamily \#include $<$SockItAPI.h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSockItAPI_abe90f8a1c172737a1c52d7216b0adee1}{SockItAPI} (const SockItPtr \&plugin, const FB::BrowserHostPtr \&host)
\item 
virtual \hyperlink{classSockItAPI_ab1bdcadeb41aea91e9adb5ae934bf742}{$\sim$SockItAPI} ()
\begin{DoxyCompactList}\small\item\em Destructor. Remember that this object will not be released until the browser is done with it; this will almost definitely be after the plugin is released. \item\end{DoxyCompactList}\item 
SockItPtr \hyperlink{classSockItAPI_a196d7874f3124a28bca5dd3f9acb5c60}{getPlugin} ()
\begin{DoxyCompactList}\small\item\em Gets a reference to the plugin that was passed in when the object was created. If the plugin has already been released then this will throw a FB::script\_\-error that will be translated into a javascript exception in the page. \item\end{DoxyCompactList}\item 
boost::shared\_\-ptr$<$ \hyperlink{classNetworkThread}{NetworkThread} $>$ \hyperlink{classSockItAPI_a5de4cedcdcfff3bc3fd88aa52f62b2eb}{create\_\-thread} ()
\item 
boost::shared\_\-ptr$<$ \hyperlink{classTcpServer}{TcpServer} $>$ \hyperlink{classSockItAPI_a48b4b81ac34fb4135c2067eb5477144a}{create\_\-tcp\_\-server} (int port, boost::optional$<$ map$<$ string, string $>$ $>$ options)
\item 
boost::shared\_\-ptr$<$ \hyperlink{classTcpClient}{TcpClient} $>$ \hyperlink{classSockItAPI_a926d3fe9cdbcf52f4a40a922a4d3a0b7}{create\_\-tcp\_\-client} (const string \&host, int port, boost::optional$<$ map$<$ string, string $>$ $>$ options)
\item 
boost::shared\_\-ptr$<$ \hyperlink{classUdpServer}{UdpServer} $>$ \hyperlink{classSockItAPI_afede6ca76e58e088b3262b02bb47d1a0}{create\_\-udp\_\-server} (int port, boost::optional$<$ map$<$ string, string $>$ $>$ options)
\item 
boost::shared\_\-ptr$<$ \hyperlink{classUdpClient}{UdpClient} $>$ \hyperlink{classSockItAPI_a459c942a85f434e96dec5cdff753ed3a}{create\_\-udp\_\-client} (const string \&host, int port, boost::optional$<$ map$<$ string, string $>$ $>$ options)
\item 
\hyperlink{Event_8h_a42e68af8ed186972f3b40e079e28dfb1}{binary} \hyperlink{classSockItAPI_a5eac49bd5ad0cb5320cbc325a0e997be}{convert\_\-to\_\-binary} (const vector$<$ \hyperlink{Event_8h_ae0aa21f6bcb621fe36c2c962aa0452fe}{byte} $>$ bytes)
\item 
FB::VariantList \hyperlink{classSockItAPI_a4e507273c91d6509be9133a34c32ed3c}{convert\_\-from\_\-binary} (\hyperlink{Event_8h_a42e68af8ed186972f3b40e079e28dfb1}{binary} data)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classNetworkThread}{NetworkThread} \hyperlink{classSockItAPI_adcfb54795f58d245c1b8ea8311a7d456}{default\_\-thread}
\item 
SockItWeakPtr \hyperlink{classSockItAPI_ac973fa980fa71d06190969448621beea}{m\_\-plugin}
\item 
FB::BrowserHostPtr \hyperlink{classSockItAPI_afb9c76de5331308b066e969d9a35d236}{m\_\-host}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Exposes the plugin's API to the browser. Primarily auto-\/generated by FireBreath, but edited to add root methods for the plugin and expose them to the javascript.

\begin{DoxySeeAlso}{See also}
\href{http://www.firebreath.org/}{\tt http://www.firebreath.org/} 
\end{DoxySeeAlso}


Definition at line 35 of file SockItAPI.h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classSockItAPI_abe90f8a1c172737a1c52d7216b0adee1}{
\index{SockItAPI@{SockItAPI}!SockItAPI@{SockItAPI}}
\index{SockItAPI@{SockItAPI}!SockItAPI@{SockItAPI}}
\subsubsection[{SockItAPI}]{\setlength{\rightskip}{0pt plus 5cm}SockItAPI::SockItAPI (
\begin{DoxyParamCaption}
\item[{const SockItPtr \&}]{plugin, }
\item[{const FB::BrowserHostPtr \&}]{host}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_abe90f8a1c172737a1c52d7216b0adee1}
Constructor for the JSAPI object. Registers root API methods for the plugin to be available to Javascript.

\begin{DoxySeeAlso}{See also}
FB::JSAPIAuto::registerMethod 

FB::JSAPIAuto::registerProperty 

FB::JSAPIAuto::registerEvent 
\end{DoxySeeAlso}


Definition at line 12 of file SockItAPI.cpp.



References convert\_\-from\_\-binary(), convert\_\-to\_\-binary(), create\_\-tcp\_\-client(), create\_\-tcp\_\-server(), create\_\-thread(), create\_\-udp\_\-client(), and create\_\-udp\_\-server().


\begin{DoxyCode}
                                                                          :
    m_plugin(plugin), m_host(host)
{
    // Register root methods for creating network threads
    registerMethod("createThread", make_method(this, &SockItAPI::create_thread));
      

    // Register root methods for creating servers & clients
    registerMethod("createUdpClient", make_method(this, &
      SockItAPI::create_udp_client));
    registerMethod("createUdpServer", make_method(this, &
      SockItAPI::create_udp_server));
    registerMethod("createTcpClient", make_method(this, &
      SockItAPI::create_tcp_client));
    registerMethod("createTcpServer", make_method(this, &
      SockItAPI::create_tcp_server));

    // Register methods for converting to and from binary data
    registerMethod("toBinary", make_method(this, &SockItAPI::convert_to_binary));
      
    registerMethod("fromBinary", make_method(this, &
      SockItAPI::convert_from_binary));
}
\end{DoxyCode}
\hypertarget{classSockItAPI_ab1bdcadeb41aea91e9adb5ae934bf742}{
\index{SockItAPI@{SockItAPI}!$\sim$SockItAPI@{$\sim$SockItAPI}}
\index{$\sim$SockItAPI@{$\sim$SockItAPI}!SockItAPI@{SockItAPI}}
\subsubsection[{$\sim$SockItAPI}]{\setlength{\rightskip}{0pt plus 5cm}SockItAPI::$\sim$SockItAPI (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classSockItAPI_ab1bdcadeb41aea91e9adb5ae934bf742}


Destructor. Remember that this object will not be released until the browser is done with it; this will almost definitely be after the plugin is released. 



Definition at line 29 of file SockItAPI.cpp.


\begin{DoxyCode}
{
}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classSockItAPI_a4e507273c91d6509be9133a34c32ed3c}{
\index{SockItAPI@{SockItAPI}!convert\_\-from\_\-binary@{convert\_\-from\_\-binary}}
\index{convert\_\-from\_\-binary@{convert\_\-from\_\-binary}!SockItAPI@{SockItAPI}}
\subsubsection[{convert\_\-from\_\-binary}]{\setlength{\rightskip}{0pt plus 5cm}FB::VariantList SockItAPI::convert\_\-from\_\-binary (
\begin{DoxyParamCaption}
\item[{{\bf binary}}]{data}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_a4e507273c91d6509be9133a34c32ed3c}
Utility function for converting a string, assumed to be binary data returned from {\ttfamily convert\_\-to\_\-binary}.


\begin{DoxyParams}{Parameters}
{\em data} & The (binary) data to be converted to an array of characters \\
\hline
\end{DoxyParams}


Definition at line 83 of file SockItAPI.cpp.



Referenced by SockItAPI().


\begin{DoxyCode}
{
    vector<byte> bytes;
    for(int i = 0; i < data.size(); i++)
    {
        bytes.push_back((unsigned char) data.data()[i]);
    }

    FB::VariantList fb_bytes;
    std::copy(bytes.begin(), bytes.end(), std::back_inserter(fb_bytes));
    return fb_bytes;
}
\end{DoxyCode}
\hypertarget{classSockItAPI_a5eac49bd5ad0cb5320cbc325a0e997be}{
\index{SockItAPI@{SockItAPI}!convert\_\-to\_\-binary@{convert\_\-to\_\-binary}}
\index{convert\_\-to\_\-binary@{convert\_\-to\_\-binary}!SockItAPI@{SockItAPI}}
\subsubsection[{convert\_\-to\_\-binary}]{\setlength{\rightskip}{0pt plus 5cm}{\bf binary} SockItAPI::convert\_\-to\_\-binary (
\begin{DoxyParamCaption}
\item[{const vector$<$ {\bf byte} $>$}]{bytes}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_a5eac49bd5ad0cb5320cbc325a0e997be}
Utility function for converting an array of integers, assumed to hexadecimal numbers, to a string.


\begin{DoxyParams}{Parameters}
{\em bytes} & The bytes of data to be converted into a string \\
\hline
\end{DoxyParams}


Definition at line 70 of file SockItAPI.cpp.



Referenced by SockItAPI().


\begin{DoxyCode}
{
    // Convert it to a character array and create a string from it
    binary data;

    for (int i = 0; i < bytes.size(); i++)
    {
        data.push_back((unsigned char) bytes[i]);
    }

    return data;
}
\end{DoxyCode}
\hypertarget{classSockItAPI_a926d3fe9cdbcf52f4a40a922a4d3a0b7}{
\index{SockItAPI@{SockItAPI}!create\_\-tcp\_\-client@{create\_\-tcp\_\-client}}
\index{create\_\-tcp\_\-client@{create\_\-tcp\_\-client}!SockItAPI@{SockItAPI}}
\subsubsection[{create\_\-tcp\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}boost::shared\_\-ptr$<$ {\bf TcpClient} $>$ SockItAPI::create\_\-tcp\_\-client (
\begin{DoxyParamCaption}
\item[{const string \&}]{host, }
\item[{int}]{port, }
\item[{boost::optional$<$ map$<$ string, string $>$ $>$}]{options}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_a926d3fe9cdbcf52f4a40a922a4d3a0b7}
Creates a new TCP client on the default {\ttfamily \hyperlink{classNetworkThread}{NetworkThread}}.


\begin{DoxyParams}{Parameters}
{\em host} & The hostname to which this TCP client will connect \\
\hline
{\em port} & The port on the remote host to which this client should connect \\
\hline
{\em options} & The set of options passed in from Javascript. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A shared pointer to a newly created TCP client 
\end{DoxyReturn}


Definition at line 53 of file SockItAPI.cpp.



References NetworkThread::create\_\-tcp\_\-client(), and default\_\-thread.



Referenced by SockItAPI().


\begin{DoxyCode}
{
    return default_thread.create_tcp_client(host, port, options);
}
\end{DoxyCode}
\hypertarget{classSockItAPI_a48b4b81ac34fb4135c2067eb5477144a}{
\index{SockItAPI@{SockItAPI}!create\_\-tcp\_\-server@{create\_\-tcp\_\-server}}
\index{create\_\-tcp\_\-server@{create\_\-tcp\_\-server}!SockItAPI@{SockItAPI}}
\subsubsection[{create\_\-tcp\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}boost::shared\_\-ptr$<$ {\bf TcpServer} $>$ SockItAPI::create\_\-tcp\_\-server (
\begin{DoxyParamCaption}
\item[{int}]{port, }
\item[{boost::optional$<$ map$<$ string, string $>$ $>$}]{options}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_a48b4b81ac34fb4135c2067eb5477144a}
Creates a new TCP server on the default {\ttfamily \hyperlink{classNetworkThread}{NetworkThread}}.


\begin{DoxyParams}{Parameters}
{\em port} & The port on which this new TCP server should listen \\
\hline
{\em options} & The set of options passed in from Javascript. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A shared pointer to a newly created TCP server 
\end{DoxyReturn}


Definition at line 48 of file SockItAPI.cpp.



References NetworkThread::create\_\-tcp\_\-server(), and default\_\-thread.



Referenced by SockItAPI().


\begin{DoxyCode}
{
    return default_thread.create_tcp_server(port, options);
}
\end{DoxyCode}
\hypertarget{classSockItAPI_a5de4cedcdcfff3bc3fd88aa52f62b2eb}{
\index{SockItAPI@{SockItAPI}!create\_\-thread@{create\_\-thread}}
\index{create\_\-thread@{create\_\-thread}!SockItAPI@{SockItAPI}}
\subsubsection[{create\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}boost::shared\_\-ptr$<$ {\bf NetworkThread} $>$ SockItAPI::create\_\-thread (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_a5de4cedcdcfff3bc3fd88aa52f62b2eb}
Creates a new {\ttfamily \hyperlink{classNetworkThread}{NetworkThread}} object on which we can create new clients and servers.

\begin{DoxyReturn}{Returns}
A shared pointer to a newly created {\ttfamily \hyperlink{classNetworkThread}{NetworkThread}} object 
\end{DoxyReturn}


Definition at line 43 of file SockItAPI.cpp.



Referenced by SockItAPI().


\begin{DoxyCode}
{
    return boost::shared_ptr<NetworkThread>(new NetworkThread());
}
\end{DoxyCode}
\hypertarget{classSockItAPI_a459c942a85f434e96dec5cdff753ed3a}{
\index{SockItAPI@{SockItAPI}!create\_\-udp\_\-client@{create\_\-udp\_\-client}}
\index{create\_\-udp\_\-client@{create\_\-udp\_\-client}!SockItAPI@{SockItAPI}}
\subsubsection[{create\_\-udp\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}boost::shared\_\-ptr$<$ {\bf UdpClient} $>$ SockItAPI::create\_\-udp\_\-client (
\begin{DoxyParamCaption}
\item[{const string \&}]{host, }
\item[{int}]{port, }
\item[{boost::optional$<$ map$<$ string, string $>$ $>$}]{options}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_a459c942a85f434e96dec5cdff753ed3a}
Creates a new UDP client on the default {\ttfamily \hyperlink{classNetworkThread}{NetworkThread}}.


\begin{DoxyParams}{Parameters}
{\em host} & The hostname to which this UDP client will connect \\
\hline
{\em port} & The port on the remote host to which this client should connect \\
\hline
{\em options} & The set of options passed in from Javascript. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A shared pointer to a newly created UDP client 
\end{DoxyReturn}


Definition at line 64 of file SockItAPI.cpp.



References NetworkThread::create\_\-udp\_\-client(), and default\_\-thread.



Referenced by SockItAPI().


\begin{DoxyCode}
{
    return default_thread.create_udp_client(host, port, options);
}
\end{DoxyCode}
\hypertarget{classSockItAPI_afede6ca76e58e088b3262b02bb47d1a0}{
\index{SockItAPI@{SockItAPI}!create\_\-udp\_\-server@{create\_\-udp\_\-server}}
\index{create\_\-udp\_\-server@{create\_\-udp\_\-server}!SockItAPI@{SockItAPI}}
\subsubsection[{create\_\-udp\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}boost::shared\_\-ptr$<$ {\bf UdpServer} $>$ SockItAPI::create\_\-udp\_\-server (
\begin{DoxyParamCaption}
\item[{int}]{port, }
\item[{boost::optional$<$ map$<$ string, string $>$ $>$}]{options}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_afede6ca76e58e088b3262b02bb47d1a0}
Creates a new UDP server on the default {\ttfamily \hyperlink{classNetworkThread}{NetworkThread}}.


\begin{DoxyParams}{Parameters}
{\em port} & The port on which this new UDP server should listen \\
\hline
{\em options} & The set of options passed in from Javascript. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A shared pointer to a newly created UDP server 
\end{DoxyReturn}


Definition at line 59 of file SockItAPI.cpp.



References NetworkThread::create\_\-udp\_\-server(), and default\_\-thread.



Referenced by SockItAPI().


\begin{DoxyCode}
{
    return default_thread.create_udp_server(port, options);
}
\end{DoxyCode}
\hypertarget{classSockItAPI_a196d7874f3124a28bca5dd3f9acb5c60}{
\index{SockItAPI@{SockItAPI}!getPlugin@{getPlugin}}
\index{getPlugin@{getPlugin}!SockItAPI@{SockItAPI}}
\subsubsection[{getPlugin}]{\setlength{\rightskip}{0pt plus 5cm}SockItPtr SockItAPI::getPlugin (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classSockItAPI_a196d7874f3124a28bca5dd3f9acb5c60}


Gets a reference to the plugin that was passed in when the object was created. If the plugin has already been released then this will throw a FB::script\_\-error that will be translated into a javascript exception in the page. 



Definition at line 33 of file SockItAPI.cpp.



References m\_\-plugin.


\begin{DoxyCode}
{
    SockItPtr plugin(m_plugin.lock());
    if (!plugin)
    {
        throw FB::script_error("The plugin is invalid");
    }
    return plugin;
}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{classSockItAPI_adcfb54795f58d245c1b8ea8311a7d456}{
\index{SockItAPI@{SockItAPI}!default\_\-thread@{default\_\-thread}}
\index{default\_\-thread@{default\_\-thread}!SockItAPI@{SockItAPI}}
\subsubsection[{default\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}{\bf NetworkThread} {\bf SockItAPI::default\_\-thread}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classSockItAPI_adcfb54795f58d245c1b8ea8311a7d456}
The default network thread used if no thread is explicitly created. 

Definition at line 127 of file SockItAPI.h.



Referenced by create\_\-tcp\_\-client(), create\_\-tcp\_\-server(), create\_\-udp\_\-client(), and create\_\-udp\_\-server().

\hypertarget{classSockItAPI_afb9c76de5331308b066e969d9a35d236}{
\index{SockItAPI@{SockItAPI}!m\_\-host@{m\_\-host}}
\index{m\_\-host@{m\_\-host}!SockItAPI@{SockItAPI}}
\subsubsection[{m\_\-host}]{\setlength{\rightskip}{0pt plus 5cm}FB::BrowserHostPtr {\bf SockItAPI::m\_\-host}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classSockItAPI_afb9c76de5331308b066e969d9a35d236}
A handle on the browser to gather information if necessary. 

Definition at line 137 of file SockItAPI.h.

\hypertarget{classSockItAPI_ac973fa980fa71d06190969448621beea}{
\index{SockItAPI@{SockItAPI}!m\_\-plugin@{m\_\-plugin}}
\index{m\_\-plugin@{m\_\-plugin}!SockItAPI@{SockItAPI}}
\subsubsection[{m\_\-plugin}]{\setlength{\rightskip}{0pt plus 5cm}SockItWeakPtr {\bf SockItAPI::m\_\-plugin}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classSockItAPI_ac973fa980fa71d06190969448621beea}
A handle on the plugin object itself. 

Definition at line 132 of file SockItAPI.h.



Referenced by getPlugin().



The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
/home/jtedesco/dev/sockit/src/plugin/\hyperlink{SockItAPI_8h}{SockItAPI.h}\item 
/home/jtedesco/dev/sockit/src/plugin/\hyperlink{SockItAPI_8cpp}{SockItAPI.cpp}\end{DoxyCompactItemize}
